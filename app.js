require("dotenv").config();const express=require("express");const path=require("path");const fetch=require("node-fetch");const app=express();app.use(express.static(path.join(__dirname,"dist")));app.get("/api/system",async(_req,res)=>{try{const rpcCall=async(url)=>{const r=await fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_blockNumber",params:[],id:1})});return r.json();};const [polygonData,ethereumData]=await Promise.all([rpcCall(process.env.POLYGON_RPC||"https://polygon-rpc.com"),rpcCall(process.env.ETHEREUM_RPC||"https://eth.llamarpc.com")]);res.status(200).json({message:"âœ… ONE-FILE SYSTEM ONLINE",modules:["Frontend","Backend","External RPC"],details:{polygonBlock:polygonData.result,ethereumBlock:ethereumData.result},timestamp:new Date().toISOString()});}catch(e){res.status(500).json({error:e.message});}});app.get("*",(_req,res)=>{res.sendFile(path.join(__dirname,"dist","index.html"));});const port=process.env.PORT||3000;app.listen(port,()=>console.log(`ONE-FILE APP ONLINE on ${port}`));
